<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Key Dragging</title>
  <style>
    .trail {
      position: absolute;
      width: 2px;
      height: 2px;
      background-color: red;
      transition: opacity 1s linear;
    }
  </style>
</head>
<body>
  <div id="output" style="width: 100px; height: 100px; background-color: #ccc;">Output area</div>
  <button id="redirectButton" style="position: absolute; top: 50px; left: 50px;">Go to index.html</button>
  <div id="mouseIndicator" style="position: absolute; width: 10px; height: 10px; border-radius: 50%; background-color: red;"></div>

  <script>
    const mouseTrail = []; // Store mouse trail coordinates

    const keyStartCoordinates = {
      'y': { x: 50, y: 50 }, // 'y' key start coordinates
      'd': { x: 100, y: 100 }, // 'd' key start coordinates
      // Add more keys and their start coordinates as needed
    };

    const keyEndCoordinates = {
      'y': { x: 200, y: 200 }, // 'y' key end coordinates
      'd': { x: 250, y: 250 }, // 'd' key end coordinates
      // Add more keys and their end coordinates as needed
    };

    let isDragging = false;
    let dragStartCoords = { x: 0, y: 0 };

    const simulateMouseDown = (x, y) => {
      const mouseDownEvent = new MouseEvent('mousedown', {
        bubbles: true,
        clientX: x,
        clientY: y
      });

      document.elementFromPoint(x, y).dispatchEvent(mouseDownEvent);
    };

    const simulateMouseMove = (x, y) => {
      const mouseMoveEvent = new MouseEvent('mousemove', {
        bubbles: true,
        clientX: x,
        clientY: y
      });

      document.elementFromPoint(x, y).dispatchEvent(mouseMoveEvent);
      updateMouseIndicator(x, y); // Update mouse indicator position
      createTrail(x, y); // Create a trail
    };

    const simulateMouseUp = (x, y) => {
      const mouseUpEvent = new MouseEvent('mouseup', {
        bubbles: true,
        clientX: x,
        clientY: y
      });

      document.elementFromPoint(x, y).dispatchEvent(mouseUpEvent);
    };

    const updateMouseIndicator = (x, y) => {
      const mouseIndicator = document.getElementById('mouseIndicator');
      mouseIndicator.style.left = `${x}px`;
      mouseIndicator.style.top = `${y}px`;
    };

    const createTrail = (x, y) => {
      mouseTrail.push({ x, y }); // Store mouse coordinates
      const trail = document.createElement('div');
      trail.classList.add('trail');
      trail.style.left = `${x}px`;
      trail.style.top = `${y}px`;

      if (mouseTrail.length > 1) {
        const lastPoint = mouseTrail[mouseTrail.length - 2];
        const deltaX = x - lastPoint.x;
        const deltaY = y - lastPoint.y;
        const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
        trail.style.width = `${distance}px`;
        trail.style.transform = `rotate(${Math.atan2(deltaY, deltaX)}rad)`;
      }

      document.body.appendChild(trail);
      setTimeout(() => {
        trail.style.opacity = 0;
        setTimeout(() => {
          trail.remove();
        }, 1000);
      }, 4000);
    };

    document.addEventListener('keydown', function(event) {
      const key = event.key.toLowerCase();
      
      if (keyStartCoordinates[key]) {
        isDragging = true;
        dragStartCoords = keyStartCoordinates[key];
        simulateMouseDown(dragStartCoords.x, dragStartCoords.y);
      }
    });

    document.addEventListener('keyup', function(event) {
      const key = event.key.toLowerCase();

      if (isDragging && keyEndCoordinates[key]) {
        isDragging = false;
        simulateMouseMove(keyEndCoordinates[key].x, keyEndCoordinates[key].y);
        simulateMouseUp(keyEndCoordinates[key].x, keyEndCoordinates[key].y);
      }
    });

    document.getElementById('redirectButton').addEventListener('click', function() {
      window.location.href = '/./index.html';
    });
  </script>
</body>
</html>
